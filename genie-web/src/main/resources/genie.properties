##
#
#  Copyright 2015 Netflix, Inc.
#
#     Licensed under the Apache License, Version 2.0 (the "License");
#     you may not use this file except in compliance with the License.
#     You may obtain a copy of the License at
#
#         http://www.apache.org/licenses/LICENSE-2.0
#
#     Unless required by applicable law or agreed to in writing, software
#     distributed under the License is distributed on an "AS IS" BASIS,
#     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#     See the License for the specific language governing permissions and
#     limitations under the License.
#
##

###########################################################################
# Environment Settings
###########################################################################

com.netflix.genie.server.java.home=/usr/lib/jvm/java-7-oracle

# hadoop home for various versions
com.netflix.genie.server.hadoop.home=/apps/hadoop/current
com.netflix.genie.server.hadoop.2.4.0.home=/apps/hadoop/2.4.0

# The timeout after which an S3 copy will be aborted
com.netflix.genie.server.hadoop.s3cp.timeout=1800


###########################################################################
# Netflix Platform Settings
###########################################################################

# Application info
netflix.appinfo.name=genie

# change this if your container is running on a different port
netflix.appinfo.port=8080

# You must provide any specific packages that must be scanned for Karyon for finding Application and Component classes.
# By default Karyon only searches com.netflix package
# The package specified here is the root package, any subpackages under the root will also be scanned.
com.netflix.karyon.server.base.packages=com.netflix.genie.server.startup

# Adds integration between Governator and Spring
com.netflix.karyon.server.bootstrap.class=com.netflix.genie.server.startup.GenieGuiceBootstrap

# The health check handler for this application.
com.netflix.karyon.health.check.handler.classname=com.netflix.genie.server.health.HealthCheck

# Comment this property if you want to enable eureka integration, and set up eureka-client.properties
com.netflix.karyon.eureka.disable=true


###########################################################################
# Genie Deployment Configuration
###########################################################################

# REST URI for the execution service
com.netflix.genie.server.job.resource.prefix=genie/v2/jobs

# If this is commented out, Genie will use InetAddress.getLocalHost() in DC,
# or the environment variable EC2_PUBLIC_HOSTNAME in the cloud
# com.netflix.genie.server.host=localhost

# Location of genie scripts - currently part of genie-web/conf/system/apps/genie/bin
# Change this appropriately to point to above location
com.netflix.genie.server.sys.home=/home/cheolsoop/genie/genie-web/conf/system/apps/genie/bin

# The relative path for the prefix directory inside Tomcat's "webapps/"
# that Genie will use for its working directory
# This is usually sym-linked to com.netflix.genie.server.user.working.dir
com.netflix.genie.server.job.dir.prefix=genie-jobs

# Actual location where output directories are created
# Create a symlink from the above directory to here
# Or simply provide the full path of the above directory
com.netflix.genie.server.user.working.dir=/mnt/tomcat/genie-jobs


###########################################################################
# Job Manager Settings
# Cluster Type to Job Manager mapping
# Format: com.netflix.genie.server.job.manager.<clusterType>.impl=<Class Name>
###########################################################################

## YARN Properties

# Job Manager
com.netflix.genie.server.job.manager.yarn.impl=com.netflix.genie.server.jobmanager.impl.YarnJobManagerImpl

# Copy Command
com.netflix.genie.server.job.manager.yarn.command.cp=/apps/hadoop/2.4.0/bin/hadoop fs \
  -Dfs.s3.impl=org.apache.hadoop.fs.s3native.NativeS3FileSystem \
  -Dfs.file.impl=org.apache.hadoop.fs.RawLocalFileSystem \
  -Dfs.s3.awsAccessKeyId=KEY \
  -Dfs.s3.awsSecretAccessKey=SECRET \
  -Dfs.s3n.awsAccessKeyId=KEY \
  -Dfs.s3n.awsSecretAccessKey=SECRET \
  -cp -f

# Make Directory Command
com.netflix.genie.server.job.manager.yarn.command.mkdir=/apps/hadoop/2.4.0/bin/hadoop fs \
  -Dfs.s3.impl=org.apache.hadoop.fs.s3native.NativeS3FileSystem \
  -Dfs.file.impl=org.apache.hadoop.fs.RawLocalFileSystem \
  -Dfs.s3.awsAccessKeyId=KEY \
  -Dfs.s3.awsSecretAccessKey=SECRET \
  -Dfs.s3n.awsAccessKeyId=KEY \
  -Dfs.s3n.awsSecretAccessKey=SECRET \
  -mkdir

# How long to sleep between checks of yarn processes
com.netflix.genie.server.job.manager.yarn.sleeptime = 5000


## Presto properties

# Job Manager
com.netflix.genie.server.job.manager.presto.impl=com.netflix.genie.server.jobmanager.impl.PrestoJobManagerImpl

# Copy Command
com.netflix.genie.server.job.manager.presto.command.cp=/apps/hadoop/2.4.0/bin/hadoop fs \
  -Dfs.s3.impl=org.apache.hadoop.fs.s3native.NativeS3FileSystem \
  -Dfs.file.impl=org.apache.hadoop.fs.RawLocalFileSystem \
  -Dfs.s3.awsAccessKeyId=KEY \
  -Dfs.s3.awsSecretAccessKey=SECRET \
  -Dfs.s3n.awsAccessKeyId=KEY \
  -Dfs.s3n.awsSecretAccessKey=SECRET \
  -cp -f

# Make Directory Command
com.netflix.genie.server.job.manager.presto.command.mkdir=/apps/hadoop/2.4.0/bin/hadoop fs \
  -Dfs.s3.impl=org.apache.hadoop.fs.s3native.NativeS3FileSystem \
  -Dfs.file.impl=org.apache.hadoop.fs.RawLocalFileSystem \
  -Dfs.s3.awsAccessKeyId=KEY \
  -Dfs.s3.awsSecretAccessKey=SECRET \
  -Dfs.s3n.awsAccessKeyId=KEY \
  -Dfs.s3n.awsSecretAccessKey=SECRET \
  -mkdir

# Connection Details for Presto Master used by Presto Job Manager. Cluster name taken from cluster config.
# Example http://<clustername>.localhost:8080 is where requests will go from presto client
com.netflix.genie.server.job.manager.presto.protocol=http://
com.netflix.genie.server.job.manager.presto.master.domain=.localhost:8080

# How long to sleep between checks of presto processes
com.netflix.genie.server.job.manager.presto.sleeptime = 500


## Spark properties

# Job Manager
com.netflix.genie.server.job.manager.spark.impl=com.netflix.genie.server.jobmanager.impl.SparkYarnJobManagerImpl

com.netflix.genie.server.job.manager.spark.deploy.mode=cluster
com.netflix.genie.server.job.manager.spark.driver.dep.jars=/apps/hive/0.11-h2/extralib/parquet-hive-bundle-current.jar,/lib/cpp,/lib/klibc-P2s_k-gf23VtrGgO2_4pGkQgwMY.so,/lib/libcryptsetup.so.4,/lib/libcryptsetup.so.4.5.0,/lib/libhandle.so.1,/lib/libhandle.so.1.0.3,/lib/libip4tc.so.0,/lib/libip4tc.so.0.1.0,/lib/libip6tc.so.0,/lib/libip6tc.so.0.1.0,/lib/libiptc.so.0,/lib/libiptc.so.0.0.0,/lib/libnvpair.so.1,/lib/libnvpair.so.1.0.1,/lib/libuutil.so.1,/lib/libuutil.so.1.0.1,/lib/libxtables.so.10,/lib/libxtables.so.10.0.0,/lib/libzfs_core.so.1,/lib/libzfs_core.so.1.0.0,/lib/libzfs.so.2,/lib/libzfs.so.2.0.0,/lib/libzpool.so.2,/lib/libzpool.so.2.0.0,,/lib/apparmor:,functions,,/lib/crda:,pubkeys,regulatory.bin,setregdomain,,/lib/cryptsetup:,askpass,checks,cryptdisks.functions,scripts,,/lib/firmware:,3.13.0-24-generic,3.13.0-40-generic,,/lib/hdparm:,hdparm-functions,,/lib/ifupdown:,settle-dad.sh,,/lib/init:,apparmor-profile-load,fstab,upstart-job,vars.sh,,/lib/lsb:,init-functions,init-functions.d,,/lib/modprobe.d:,,/lib/modules:,3.13.0-24-generic,3.13.0-40-generic,,/lib/modules-load.d:,fuse.conf,,/lib/plymouth:,themes,ubuntu_logo.png,,/lib/recovery-mode:,l10n.sh,options,recovery-menu,recovery-mode,,/lib/resolvconf:,list-records,,/lib/systemd:,system,systemd-hostnamed,systemd-localed,systemd-logind,systemd-multi-seat-x,systemd-timedated,systemd-udevd,,/lib/terminfo:,a,c,d,E,h,l,m,p,r,s,v,w,x,,/lib/udev:,accelerometer,ata_id,cdrom_id,collect,console-setup-tty,hdparm,hotplug.functions,hwdb.bin,hwdb.d,mtd_probe,rule_generator.functions,rules.d,scsi_id,v4l_id,vdev_id,write_net_rules,zvol_id,,/lib/ufw:,ufw-init,ufw-init-functions,user6.rules,user.rules,,/lib/x86_64-linux-gnu:,ld-2.19.so,ld-linux-x86-64.so.2,libacl.so.1,libacl.so.1.1.0,libaio.so.1,libaio.so.1.0.1,libanl-2.19.so,libanl.so.1,libattr.so.1,libattr.so.1.1.0,libaudit.so.1,libaudit.so.1.0.0,libblkid.so.1,libblkid.so.1.1.0,libBrokenLocale-2.19.so,libBrokenLocale.so.1,libbsd.so.0,libbsd.so.0.6.0,libbz2.so.1,libbz2.so.1.0,libbz2.so.1.0.4,libc-2.19.so,libcap.so.2,libcap.so.2.24,libcgmanager.so.0,libcgmanager.so.0.0.0,libcidn-2.19.so,libcidn.so.1,libcom_err.so.2,libcom_err.so.2.1,libcrypt-2.19.so,libcrypto.so.1.0.0,libcrypt.so.1,libc.so.6,libdbus-1.so.3,libdbus-1.so.3.7.6,libdevmapper.so.1.02.1,libdl-2.19.so,libdl.so.2,libe2p.so.2,libe2p.so.2.3,libexpat.so.1,libexpat.so.1.6.0,libext2fs.so.2,libext2fs.so.2.4,libfuse.so.2,libfuse.so.2.9.2,libgcc_s.so.1,libgcrypt.so.11,libgcrypt.so.11.8.2,libglib-2.0.so.0,libglib-2.0.so.0.4002.0,libgpg-error.so.0,libgpg-error.so.0.10.0,libhistory.so.5,libhistory.so.5.2,libhistory.so.6,libhistory.so.6.3,libjson-c.so.2,libjson-c.so.2.0.0,libjson.so.0,libkeyutils.so.1,libkeyutils.so.1.4,libkmod.so.2,libkmod.so.2.2.5,liblzma.so.5,liblzma.so.5.0.0,liblzo2.so.2,liblzo2.so.2.0.0,libm-2.19.so,libmemusage.so,libmount.so.1,libmount.so.1.1.0,libm.so.6,libncurses.so.5,libncurses.so.5.9,libncursesw.so.5,libncursesw.so.5.9,libnewt.so.0.52,libnewt.so.0.52.15,libnih-dbus.so.1,libnih-dbus.so.1.0.0,libnih.so.1,libnih.so.1.0.0,libnl-3.so.200,libnl-3.so.200.16.1,libnl-genl-3.so.200,libnl-genl-3.so.200.16.1,libnsl-2.19.so,libnsl.so.1,libnss_compat-2.19.so,libnss_compat.so.2,libnss_dns-2.19.so,libnss_dns.so.2,libnss_files-2.19.so,libnss_files.so.2,libnss_hesiod-2.19.so,libnss_hesiod.so.2,libnss_nis-2.19.so,libnss_nisplus-2.19.so,libnss_nisplus.so.2,libnss_nis.so.2,libntfs-3g.so.841,libntfs-3g.so.841.0.0,libpamc.so.0,libpamc.so.0.82.1,libpam_misc.so.0,libpam_misc.so.0.82.0,libpam.so.0,libpam.so.0.83.1,libparted.so.0,libparted.so.0.0.1,libpci.so.3,libpci.so.3.2.1,libpcprofile.so,libpcre.so.3,libpcre.so.3.13.1,libply-boot-client.so.2,libply-boot-client.so.2.1.0,libply.so.2,libply.so.2.1.0,libply-splash-core.so.2,libply-splash-core.so.2.1.0,libply-splash-graphics.so.2,libply-splash-graphics.so.2.1.0,libpng12.so.0,libpng12.so.0.50.0,libpopt.so.0,libpopt.so.0.0.0,libprocps.so.3,libprocps.so.3.0.0,libpthread-2.19.so,libpthread.so.0,libreadline.so.5,libreadline.so.5.2,libreadline.so.6,libreadline.so.6.3,libresolv-2.19.so,libresolv.so.2,librt-2.19.so,librt.so.1,libSegFault.so,libselinux.so.1,libsepol.so.1,libslang.so.2,libslang.so.2.2.4,libssl.so.1.0.0,libss.so.2,libss.so.2.0,libsystemd-daemon.so.0,libsystemd-daemon.so.0.0.10,libsystemd-login.so.0,libsystemd-login.so.0.7.1,libthread_db-1.0.so,libthread_db.so.1,libtinfo.so.5,libtinfo.so.5.9,libudev.so.1,libudev.so.1.3.5,libulockmgr.so.1,libulockmgr.so.1.0.1,libusb-0.1.so.4,libusb-0.1.so.4.4.4,libusb-1.0.so.0,libusb-1.0.so.0.1.0,libutil-2.19.so,libutil.so.1,libuuid.so.1,libuuid.so.1.3.0,libwrap.so.0,libwrap.so.0.7.6,libz.so.1,libz.so.1.2.8,plymouth,security,,/lib/xtables:,libip6t_ah.so,libip6t_DNAT.so,libip6t_DNPT.so,libip6t_dst.so,libip6t_eui64.so,libip6t_frag.so,libip6t_hbh.so,libip6t_hl.so,libip6t_HL.so,libip6t_icmp6.so,libip6t_ipv6header.so,libip6t_LOG.so,libip6t_MASQUERADE.so,libip6t_mh.so,libip6t_NETMAP.so,libip6t_REDIRECT.so,libip6t_REJECT.so,libip6t_rt.so,libip6t_SNAT.so,libip6t_SNPT.so,libipt_ah.so,libipt_CLUSTERIP.so,libipt_DNAT.so,libipt_ECN.so,libipt_icmp.so,libipt_LOG.so,libipt_MASQUERADE.so,libipt_MIRROR.so,libipt_NETMAP.so,libipt_realm.so,libipt_REDIRECT.so,libipt_REJECT.so,libipt_SAME.so,libipt_SNAT.so,libipt_ttl.so,libipt_TTL.so,libipt_ULOG.so,libipt_unclean.so,libxt_addrtype.so,libxt_AUDIT.so,libxt_bpf.so,libxt_CHECKSUM.so,libxt_CLASSIFY.so,libxt_cluster.so,libxt_comment.so,libxt_connbytes.so,libxt_connlabel.so,libxt_connlimit.so,libxt_connmark.so,libxt_CONNMARK.so,libxt_CONNSECMARK.so,libxt_conntrack.so,libxt_cpu.so,libxt_CT.so,libxt_dccp.so,libxt_devgroup.so,libxt_dscp.so,libxt_DSCP.so,libxt_ecn.so,libxt_esp.so,libxt_hashlimit.so,libxt_helper.so,libxt_HMARK.so,libxt_IDLETIMER.so,libxt_iprange.so,libxt_ipvs.so,libxt_LED.so,libxt_length.so,libxt_limit.so,libxt_mac.so,libxt_mark.so,libxt_MARK.so,libxt_multiport.so,libxt_nfacct.so,libxt_NFLOG.so,libxt_NFQUEUE.so,libxt_NOTRACK.so,libxt_osf.so,libxt_owner.so,libxt_physdev.so,libxt_pkttype.so,libxt_policy.so,libxt_quota.so,libxt_rateest.so,libxt_RATEEST.so,libxt_recent.so,libxt_rpfilter.so,libxt_sctp.so,libxt_SECMARK.so,libxt_set.so,libxt_SET.so,libxt_socket.so,libxt_standard.so,libxt_state.so,libxt_statistic.so,libxt_string.so,libxt_SYNPROXY.so,libxt_tcpmss.so,libxt_TCPMSS.so,libxt_TCPOPTSTRIP.so,libxt_tcp.so,libxt_TEE.so,libxt_time.so,libxt_tos.so,libxt_TOS.so,libxt_TPROXY.so,libxt_TRACE.so,libxt_u32.so,libxt_udp.so,/conf/hive-site.xml
com.netflix.genie.server.job.manager.spark.driver.java.opts=-XX:MaxPermSize=512m
com.netflix.genie.server.job.manager.spark.driver.memory=5120m

# Copy Command
com.netflix.genie.server.job.manager.yarn.command.cp=/apps/hadoop/2.4.0/bin/hadoop fs \
  -Dfs.s3.impl=org.apache.hadoop.fs.s3native.NativeS3FileSystem \
  -Dfs.file.impl=org.apache.hadoop.fs.RawLocalFileSystem \
  -Dfs.s3.awsAccessKeyId=KEY \
  -Dfs.s3.awsSecretAccessKey=SECRET \
  -Dfs.s3n.awsAccessKeyId=KEY \
  -Dfs.s3n.awsSecretAccessKey=SECRET \
  -cp -f

# Make Directory Command
com.netflix.genie.server.job.manager.yarn.command.mkdir=/apps/hadoop/2.4.0/bin/hadoop fs \
  -Dfs.s3.impl=org.apache.hadoop.fs.s3native.NativeS3FileSystem \
  -Dfs.file.impl=org.apache.hadoop.fs.RawLocalFileSystem \
  -Dfs.s3.awsAccessKeyId=KEY \
  -Dfs.s3.awsSecretAccessKey=SECRET \
  -Dfs.s3n.awsAccessKeyId=KEY \
  -Dfs.s3n.awsSecretAccessKey=SECRET \
  -mkdir

# How long to sleep between checks of spark processes
com.netflix.genie.server.job.manager.spark.sleeptime = 500

###########################################################################
# Configuration for janitor thread, which cleans up zombie jobs
###########################################################################

# minimum sleep time between iterations
com.netflix.genie.server.janitor.min.sleep.ms=300000

# maximum sleep time between iterations
com.netflix.genie.server.janitor.max.sleep.ms=600000

# the time delta older than which unupdated jobs are marked as zombies
com.netflix.genie.server.janitor.zombie.delta.ms=1800000


###########################################################################
# Configuration for the metrics thread, which updates servo metrics
###########################################################################

# metrics will be delayed at most by this time
com.netflix.genie.server.metrics.sleep.ms=30000


###########################################################################
# Job throttling/forwarding Settings
###########################################################################

# max running jobs on this instance, after which 503s are thrown
com.netflix.genie.server.max.running.jobs=30

# number of running jobs on instance, after which to start forwarding to other instances
# to disable auto-forwarding of jobs, set this to higher than com.netflix.genie.server.max.running.jobs
com.netflix.genie.server.forward.jobs.threshold=20

# find an idle instance with fewer running jobs than current, by this delta
# e.g. if com.netflix.genie.server.forward.jobs.threshold=20, forward jobs to an instance
# with number of running jobs < (20-com.netflix.genie.server.idle.host.threshold.delta)
com.netflix.genie.server.idle.host.threshold.delta=5

# max running jobs on instance that jobs can be forwarded to
com.netflix.genie.server.max.idle.host.threshold=27

# if uncommented, the job will be killed if the size of its stdout is greater than the limit
# com.netflix.genie.job.max.stdout.size=8589934592

# if uncommented, the job will be killed if the size of its stderr is greater than the limit
# com.netflix.genie.job.max.stderr.size=8589934592


###########################################################################
# Job Tagging Settings
###########################################################################

# Set this to true if you want the server to add the job id and job name
# to the set of tags for each job by default. Note: This will degrade query
# performance due to much more data being added to database in join table.
com.netflix.genie.server.jobs.tags.default=false


###########################################################################
# Job Archiving
###########################################################################

# if set, archive logs to this location
# com.netflix.genie.server.s3.archive.location=s3://SOME_S3_PREFIX


###########################################################################
# Properties for Lipstick (https://github.com/Netflix/lipstick)
###########################################################################

# Enable Lipstick integration
# setting this to true simply passes along the genie job ID to Lipstick
com.netflix.genie.server.lipstick.enable=true

# property name to set if lipstick integration is enabled
com.netflix.genie.server.lipstick.uuid.prop.name=lipstick.uuid.prop.name


###########################################################################
# Email Settings
###########################################################################

# Enable email upon job completion
com.netflix.genie.server.mail.enable=false

# Smtp Server.
com.netflix.genie.server.mail.smtp.host=localhost
com.netflix.genie.server.mail.smpt.from=no-reply-genie@geniehost.com

# Decide whether you want to enable authentication
com.netflix.genie.server.mail.smtp.auth=false

# User and Password only used if authentication is enabled.
# If you set authentication to true you should uncomment the
# user and password below and put appropriate values
# com.netflix.genie.server.mail.smtp.user=
# com.netflix.genie.server.mail.smtp.password=
